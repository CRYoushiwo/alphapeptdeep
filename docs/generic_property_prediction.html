---

title: *Generic Property Prediction


keywords: fastai
sidebar: home_sidebar



nb_path: "nbdev_nbs/model/generic_property_prediction.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbdev_nbs/model/generic_property_prediction.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">reload_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Description">Description<a class="anchor-link" href="#Description"> </a></h2><h3 id="Scope-of-the-generic-property-prediction">Scope of the generic property prediction<a class="anchor-link" href="#Scope-of-the-generic-property-prediction"> </a></h3><p>One focus of the AlpahPeptDeep framework is on the prediction of retention times, MS2 Spectra and Collisional Cross sections of peptides. The Models to predict these properties are defined in the notebooks <code>rt.ipynb</code>, <code>ms2.ipynb</code> and <code>ccs.ipynb</code> respectively. In the following notebook, we define a more generalized model, which in principle allows to predict or classify arbitrary properties of peptides. The classes allow users to create new deep learning predictions of peptide properties, even without prior expertise in deep learning.</p>
<h3 id="How-to-build-new-models,-even-without-experience-in-deep-learning">How to build new models, even without experience in deep learning<a class="anchor-link" href="#How-to-build-new-models,-even-without-experience-in-deep-learning"> </a></h3><p>In order to predict or classify novel properties of peptides, the user simply needs to provide a list of peptides with a corresponding property (e.g. 'binding affinity') for each peptide. The user only needs to initialize one the <a href="/alphapeptdeep/model_interface.html#ModelInterface"><code>ModelInterface</code></a> classes below and specify the name of the <code>target_column_to_train</code> and optionally the <code>target_column_to_predict</code>. The generic model classes will try to derive predictions or classifications of the property from the peptide sequence. Additional classes are also given, which complement the peptide sequence info with site-specific PTM infos.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Imports">Imports<a class="anchor-link" href="#Imports"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Regression-models-for-predicting-a-scalar-value-for-a-given-amino-acid-sequence">Regression models for predicting a scalar value for a given amino acid sequence<a class="anchor-link" href="#Regression-models-for-predicting-a-scalar-value-for-a-given-amino-acid-sequence"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Model_for_Generic_AASeq_Regression_LSTM" class="doc_header"><code>class</code> <code>Model_for_Generic_AASeq_Regression_LSTM</code><a href="https://github.com/MannLabs/alphapeptdeep/tree/main/peptdeep/model/generic_property_prediction.py#L24" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Model_for_Generic_AASeq_Regression_LSTM</code>(<strong><code>hidden_dim</code></strong>=<em><code>256</code></em>, <strong><code>n_lstm_layers</code></strong>=<em><code>4</code></em>, <strong><code>dropout</code></strong>=<em><code>0.1</code></em>, <strong>**<code>kwargs</code></strong>) :: <code>Module</code></p>
</blockquote>
<p>Base class for all neural network modules.</p>
<p>Your models should also subclass this class.</p>
<p>Modules can also contain other Modules, allowing to nest them in
a tree structure. You can assign the submodules as regular attributes::</p>

<pre><code>import torch.nn as nn
import torch.nn.functional as F

class Model(nn.Module):
    def __init__(self):
        super(Model, self).__init__()
        self.conv1 = nn.Conv2d(1, 20, 5)
        self.conv2 = nn.Conv2d(20, 20, 5)

    def forward(self, x):
        x = F.relu(self.conv1(x))
        return F.relu(self.conv2(x))

</code></pre>
<p>Submodules assigned in this way will be registered, and will have their
parameters converted too when you call :meth:<code>to</code>, etc.</p>
<p>:ivar training: Boolean represents whether this module is in training or
                evaluation mode.
:vartype training: bool</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Model_for_Generic_AASeq_Regression_Transformer" class="doc_header"><code>class</code> <code>Model_for_Generic_AASeq_Regression_Transformer</code><a href="https://github.com/MannLabs/alphapeptdeep/tree/main/peptdeep/model/generic_property_prediction.py#L52" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Model_for_Generic_AASeq_Regression_Transformer</code>(<strong><code>hidden_dim</code></strong>=<em><code>256</code></em>, <strong><code>nlayers</code></strong>=<em><code>4</code></em>, <strong><code>output_attentions</code></strong>=<em><code>False</code></em>, <strong><code>dropout</code></strong>=<em><code>0.1</code></em>, <strong>**<code>kwargs</code></strong>) :: <code>Module</code></p>
</blockquote>
<p>Base class for all neural network modules.</p>
<p>Your models should also subclass this class.</p>
<p>Modules can also contain other Modules, allowing to nest them in
a tree structure. You can assign the submodules as regular attributes::</p>

<pre><code>import torch.nn as nn
import torch.nn.functional as F

class Model(nn.Module):
    def __init__(self):
        super(Model, self).__init__()
        self.conv1 = nn.Conv2d(1, 20, 5)
        self.conv2 = nn.Conv2d(20, 20, 5)

    def forward(self, x):
        x = F.relu(self.conv1(x))
        return F.relu(self.conv2(x))

</code></pre>
<p>Submodules assigned in this way will be registered, and will have their
parameters converted too when you call :meth:<code>to</code>, etc.</p>
<p>:ivar training: Boolean represents whether this module is in training or
                evaluation mode.
:vartype training: bool</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ModelInterface_for_Generic_AASeq_Regression" class="doc_header"><code>class</code> <code>ModelInterface_for_Generic_AASeq_Regression</code><a href="https://github.com/MannLabs/alphapeptdeep/tree/main/peptdeep/model/generic_property_prediction.py#L108" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ModelInterface_for_Generic_AASeq_Regression</code>(<strong><code>dropout</code></strong>=<em><code>0.1</code></em>, <strong><code>model_class</code></strong>:<code>Module</code>=<em><code>Model_for_Generic_AASeq_Regression_LSTM</code></em>, <strong><code>device</code></strong>:<code>str</code>=<em><code>'gpu'</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/alphapeptdeep/model_interface.html#ModelInterface"><code>ModelInterface</code></a></p>
</blockquote>
<p>Provides standardized methods to interact
with ml models. Inherit into new class and override
the abstract (i.e. not implemented) methods.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Define-example-Table">Define example Table<a class="anchor-link" href="#Define-example-Table"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">create_example_input_dataframe_normalized_irt</span><span class="p">():</span>
    <span class="kn">from</span> <span class="nn">peptdeep.model.rt</span> <span class="kn">import</span> <span class="n">IRT_PEPTIDE_DF</span>
    
    <span class="n">IRT_PEPTIDE_DF</span><span class="o">=</span><span class="n">IRT_PEPTIDE_DF</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">IRT_PEPTIDE_DF</span><span class="p">[</span><span class="s1">&#39;normalized_irt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IRT_PEPTIDE_DF</span><span class="o">.</span><span class="n">irt</span><span class="o">-</span><span class="n">IRT_PEPTIDE_DF</span><span class="o">.</span><span class="n">irt</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
    <span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">IRT_PEPTIDE_DF</span><span class="o">.</span><span class="n">irt</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">-</span><span class="n">IRT_PEPTIDE_DF</span><span class="o">.</span><span class="n">irt</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">IRT_PEPTIDE_DF</span>

<span class="n">create_example_input_dataframe_normalized_irt</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sequence</th>
      <th>pep_name</th>
      <th>irt</th>
      <th>mods</th>
      <th>mod_sites</th>
      <th>nAA</th>
      <th>normalized_irt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LGGNEQVTR</td>
      <td>RT-pep a</td>
      <td>-24.92</td>
      <td></td>
      <td></td>
      <td>9</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GAGSSEPVTGLDAK</td>
      <td>RT-pep b</td>
      <td>0.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>0.199488</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VEATFGVDESNAK</td>
      <td>RT-pep c</td>
      <td>12.39</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.298671</td>
    </tr>
    <tr>
      <th>3</th>
      <td>YILAGVENSK</td>
      <td>RT-pep d</td>
      <td>19.79</td>
      <td></td>
      <td></td>
      <td>10</td>
      <td>0.357909</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TPVISGGPYEYR</td>
      <td>RT-pep e</td>
      <td>28.71</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.429315</td>
    </tr>
    <tr>
      <th>5</th>
      <td>TPVITGAPYEYR</td>
      <td>RT-pep f</td>
      <td>33.38</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.466699</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DGLDAASYYAPVR</td>
      <td>RT-pep g</td>
      <td>42.26</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.537784</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ADVTPADFSEWSK</td>
      <td>RT-pep h</td>
      <td>54.62</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.636728</td>
    </tr>
    <tr>
      <th>8</th>
      <td>GTFIIDPGGVIR</td>
      <td>RT-pep i</td>
      <td>70.52</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.764009</td>
    </tr>
    <tr>
      <th>9</th>
      <td>GTFIIDPAAVIR</td>
      <td>RT-pep k</td>
      <td>87.23</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.897775</td>
    </tr>
    <tr>
      <th>10</th>
      <td>LFLQFGAQGSPFLK</td>
      <td>RT-pep l</td>
      <td>100.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Building-an-RT-model-based-on-Model_for_Generic_AASeq_Regression_LSTM">Building an RT model based on <a href="/alphapeptdeep/generic_property_prediction.html#Model_for_Generic_AASeq_Regression_LSTM"><code>Model_for_Generic_AASeq_Regression_LSTM</code></a><a class="anchor-link" href="#Building-an-RT-model-based-on-Model_for_Generic_AASeq_Regression_LSTM"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_df</span> <span class="o">=</span> <span class="n">create_example_input_dataframe_normalized_irt</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">example_df</span><span class="p">)</span>

<span class="c1">#initialize the modelinterface, specify which of the models to use</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ModelInterface_for_Generic_AASeq_Regression</span><span class="p">(</span>
    <span class="n">model_class</span><span class="o">=</span><span class="n">Model_for_Generic_AASeq_Regression_LSTM</span>
<span class="p">)</span>
<span class="c1"># specify the name of the column you want to use for traning</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_train</span> <span class="o">=</span> <span class="s1">&#39;normalized_irt&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_predict</span> <span class="o">=</span> <span class="s1">&#39;predicted_normalized_irt&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">example_df</span><span class="p">,</span> <span class="n">epoch</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">example_df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sequence</th>
      <th>pep_name</th>
      <th>irt</th>
      <th>mods</th>
      <th>mod_sites</th>
      <th>nAA</th>
      <th>normalized_irt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LGGNEQVTR</td>
      <td>RT-pep a</td>
      <td>-24.92</td>
      <td></td>
      <td></td>
      <td>9</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GAGSSEPVTGLDAK</td>
      <td>RT-pep b</td>
      <td>0.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>0.199488</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VEATFGVDESNAK</td>
      <td>RT-pep c</td>
      <td>12.39</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.298671</td>
    </tr>
    <tr>
      <th>3</th>
      <td>YILAGVENSK</td>
      <td>RT-pep d</td>
      <td>19.79</td>
      <td></td>
      <td></td>
      <td>10</td>
      <td>0.357909</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TPVISGGPYEYR</td>
      <td>RT-pep e</td>
      <td>28.71</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.429315</td>
    </tr>
    <tr>
      <th>5</th>
      <td>TPVITGAPYEYR</td>
      <td>RT-pep f</td>
      <td>33.38</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.466699</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DGLDAASYYAPVR</td>
      <td>RT-pep g</td>
      <td>42.26</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.537784</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ADVTPADFSEWSK</td>
      <td>RT-pep h</td>
      <td>54.62</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.636728</td>
    </tr>
    <tr>
      <th>8</th>
      <td>GTFIIDPGGVIR</td>
      <td>RT-pep i</td>
      <td>70.52</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.764009</td>
    </tr>
    <tr>
      <th>9</th>
      <td>GTFIIDPAAVIR</td>
      <td>RT-pep k</td>
      <td>87.23</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.897775</td>
    </tr>
    <tr>
      <th>10</th>
      <td>LFLQFGAQGSPFLK</td>
      <td>RT-pep l</td>
      <td>100.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sequence</th>
      <th>pep_name</th>
      <th>irt</th>
      <th>mods</th>
      <th>mod_sites</th>
      <th>nAA</th>
      <th>normalized_irt</th>
      <th>predicted_normalized_irt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LGGNEQVTR</td>
      <td>RT-pep a</td>
      <td>-24.92</td>
      <td></td>
      <td></td>
      <td>9</td>
      <td>0.000000</td>
      <td>0.007052</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GAGSSEPVTGLDAK</td>
      <td>RT-pep b</td>
      <td>0.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>0.199488</td>
      <td>0.237059</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VEATFGVDESNAK</td>
      <td>RT-pep c</td>
      <td>12.39</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.298671</td>
      <td>0.321053</td>
    </tr>
    <tr>
      <th>3</th>
      <td>YILAGVENSK</td>
      <td>RT-pep d</td>
      <td>19.79</td>
      <td></td>
      <td></td>
      <td>10</td>
      <td>0.357909</td>
      <td>0.371977</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TPVISGGPYEYR</td>
      <td>RT-pep e</td>
      <td>28.71</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.429315</td>
      <td>0.423640</td>
    </tr>
    <tr>
      <th>5</th>
      <td>TPVITGAPYEYR</td>
      <td>RT-pep f</td>
      <td>33.38</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.466699</td>
      <td>0.479110</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DGLDAASYYAPVR</td>
      <td>RT-pep g</td>
      <td>42.26</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.537784</td>
      <td>0.711614</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ADVTPADFSEWSK</td>
      <td>RT-pep h</td>
      <td>54.62</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.636728</td>
      <td>0.705609</td>
    </tr>
    <tr>
      <th>8</th>
      <td>GTFIIDPGGVIR</td>
      <td>RT-pep i</td>
      <td>70.52</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.764009</td>
      <td>0.648197</td>
    </tr>
    <tr>
      <th>9</th>
      <td>GTFIIDPAAVIR</td>
      <td>RT-pep k</td>
      <td>87.23</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.897775</td>
      <td>0.833484</td>
    </tr>
    <tr>
      <th>10</th>
      <td>LFLQFGAQGSPFLK</td>
      <td>RT-pep l</td>
      <td>100.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>1.000000</td>
      <td>0.978105</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Building-an-RT-model-for-only-sequences-based-on-Model_for_Generic_AASeq_Regression_Transformer">Building an RT model for only sequences based on <a href="/alphapeptdeep/generic_property_prediction.html#Model_for_Generic_AASeq_Regression_Transformer"><code>Model_for_Generic_AASeq_Regression_Transformer</code></a><a class="anchor-link" href="#Building-an-RT-model-for-only-sequences-based-on-Model_for_Generic_AASeq_Regression_Transformer"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_df</span> <span class="o">=</span> <span class="n">create_example_input_dataframe_normalized_irt</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">example_df</span><span class="p">)</span>

<span class="c1">#initialize the modelinterface, specify which of the models to use</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ModelInterface_for_Generic_AASeq_Regression</span><span class="p">(</span>
    <span class="n">model_class</span><span class="o">=</span><span class="n">Model_for_Generic_AASeq_Regression_Transformer</span>
<span class="p">)</span>
<span class="c1"># specify the name of the column you want to use for traning</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_train</span> <span class="o">=</span> <span class="s1">&#39;normalized_irt&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_predict</span> <span class="o">=</span> <span class="s1">&#39;predicted_normalized_irt&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">example_df</span><span class="p">,</span> <span class="n">epoch</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">example_df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sequence</th>
      <th>pep_name</th>
      <th>irt</th>
      <th>mods</th>
      <th>mod_sites</th>
      <th>nAA</th>
      <th>normalized_irt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LGGNEQVTR</td>
      <td>RT-pep a</td>
      <td>-24.92</td>
      <td></td>
      <td></td>
      <td>9</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GAGSSEPVTGLDAK</td>
      <td>RT-pep b</td>
      <td>0.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>0.199488</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VEATFGVDESNAK</td>
      <td>RT-pep c</td>
      <td>12.39</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.298671</td>
    </tr>
    <tr>
      <th>3</th>
      <td>YILAGVENSK</td>
      <td>RT-pep d</td>
      <td>19.79</td>
      <td></td>
      <td></td>
      <td>10</td>
      <td>0.357909</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TPVISGGPYEYR</td>
      <td>RT-pep e</td>
      <td>28.71</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.429315</td>
    </tr>
    <tr>
      <th>5</th>
      <td>TPVITGAPYEYR</td>
      <td>RT-pep f</td>
      <td>33.38</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.466699</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DGLDAASYYAPVR</td>
      <td>RT-pep g</td>
      <td>42.26</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.537784</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ADVTPADFSEWSK</td>
      <td>RT-pep h</td>
      <td>54.62</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.636728</td>
    </tr>
    <tr>
      <th>8</th>
      <td>GTFIIDPGGVIR</td>
      <td>RT-pep i</td>
      <td>70.52</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.764009</td>
    </tr>
    <tr>
      <th>9</th>
      <td>GTFIIDPAAVIR</td>
      <td>RT-pep k</td>
      <td>87.23</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.897775</td>
    </tr>
    <tr>
      <th>10</th>
      <td>LFLQFGAQGSPFLK</td>
      <td>RT-pep l</td>
      <td>100.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sequence</th>
      <th>pep_name</th>
      <th>irt</th>
      <th>mods</th>
      <th>mod_sites</th>
      <th>nAA</th>
      <th>normalized_irt</th>
      <th>predicted_normalized_irt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LGGNEQVTR</td>
      <td>RT-pep a</td>
      <td>-24.92</td>
      <td></td>
      <td></td>
      <td>9</td>
      <td>0.000000</td>
      <td>0.098438</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GAGSSEPVTGLDAK</td>
      <td>RT-pep b</td>
      <td>0.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>0.199488</td>
      <td>0.310149</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VEATFGVDESNAK</td>
      <td>RT-pep c</td>
      <td>12.39</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.298671</td>
      <td>0.330474</td>
    </tr>
    <tr>
      <th>3</th>
      <td>YILAGVENSK</td>
      <td>RT-pep d</td>
      <td>19.79</td>
      <td></td>
      <td></td>
      <td>10</td>
      <td>0.357909</td>
      <td>0.464114</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TPVISGGPYEYR</td>
      <td>RT-pep e</td>
      <td>28.71</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.429315</td>
      <td>0.579034</td>
    </tr>
    <tr>
      <th>5</th>
      <td>TPVITGAPYEYR</td>
      <td>RT-pep f</td>
      <td>33.38</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.466699</td>
      <td>0.531123</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DGLDAASYYAPVR</td>
      <td>RT-pep g</td>
      <td>42.26</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.537784</td>
      <td>0.774658</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ADVTPADFSEWSK</td>
      <td>RT-pep h</td>
      <td>54.62</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.636728</td>
      <td>0.752060</td>
    </tr>
    <tr>
      <th>8</th>
      <td>GTFIIDPGGVIR</td>
      <td>RT-pep i</td>
      <td>70.52</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.764009</td>
      <td>0.837158</td>
    </tr>
    <tr>
      <th>9</th>
      <td>GTFIIDPAAVIR</td>
      <td>RT-pep k</td>
      <td>87.23</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.897775</td>
      <td>0.967516</td>
    </tr>
    <tr>
      <th>10</th>
      <td>LFLQFGAQGSPFLK</td>
      <td>RT-pep l</td>
      <td>100.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>1.000000</td>
      <td>1.165970</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Regression-models-for-predicting-a-scalar-value-for-a-given-amino-acid-sequence-and-site-specific-PTMs">Regression models for predicting a scalar value for a given amino acid sequence and site-specific PTMs<a class="anchor-link" href="#Regression-models-for-predicting-a-scalar-value-for-a-given-amino-acid-sequence-and-site-specific-PTMs"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Model_for_Generic_ModAASeq_Regression_LSTM" class="doc_header"><code>class</code> <code>Model_for_Generic_ModAASeq_Regression_LSTM</code><a href="https://github.com/MannLabs/alphapeptdeep/tree/main/peptdeep/model/generic_property_prediction.py#L127" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Model_for_Generic_ModAASeq_Regression_LSTM</code>(<strong><code>hidden_dim</code></strong>=<em><code>256</code></em>, <strong><code>n_lstm_layers</code></strong>=<em><code>4</code></em>, <strong><code>dropout</code></strong>=<em><code>0.1</code></em>, <strong>**<code>kwargs</code></strong>) :: <code>Module</code></p>
</blockquote>
<p>Base class for all neural network modules.</p>
<p>Your models should also subclass this class.</p>
<p>Modules can also contain other Modules, allowing to nest them in
a tree structure. You can assign the submodules as regular attributes::</p>

<pre><code>import torch.nn as nn
import torch.nn.functional as F

class Model(nn.Module):
    def __init__(self):
        super(Model, self).__init__()
        self.conv1 = nn.Conv2d(1, 20, 5)
        self.conv2 = nn.Conv2d(20, 20, 5)

    def forward(self, x):
        x = F.relu(self.conv1(x))
        return F.relu(self.conv2(x))

</code></pre>
<p>Submodules assigned in this way will be registered, and will have their
parameters converted too when you call :meth:<code>to</code>, etc.</p>
<p>:ivar training: Boolean represents whether this module is in training or
                evaluation mode.
:vartype training: bool</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Model_for_Generic_ModAASeq_Regression_Transformer" class="doc_header"><code>class</code> <code>Model_for_Generic_ModAASeq_Regression_Transformer</code><a href="https://github.com/MannLabs/alphapeptdeep/tree/main/peptdeep/model/generic_property_prediction.py#L152" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Model_for_Generic_ModAASeq_Regression_Transformer</code>(<strong><code>hidden_dim</code></strong>=<em><code>256</code></em>, <strong><code>nlayers</code></strong>=<em><code>4</code></em>, <strong><code>output_attentions</code></strong>=<em><code>False</code></em>, <strong><code>dropout</code></strong>=<em><code>0.1</code></em>, <strong>**<code>kwargs</code></strong>) :: <code>Module</code></p>
</blockquote>
<p>Base class for all neural network modules.</p>
<p>Your models should also subclass this class.</p>
<p>Modules can also contain other Modules, allowing to nest them in
a tree structure. You can assign the submodules as regular attributes::</p>

<pre><code>import torch.nn as nn
import torch.nn.functional as F

class Model(nn.Module):
    def __init__(self):
        super(Model, self).__init__()
        self.conv1 = nn.Conv2d(1, 20, 5)
        self.conv2 = nn.Conv2d(20, 20, 5)

    def forward(self, x):
        x = F.relu(self.conv1(x))
        return F.relu(self.conv2(x))

</code></pre>
<p>Submodules assigned in this way will be registered, and will have their
parameters converted too when you call :meth:<code>to</code>, etc.</p>
<p>:ivar training: Boolean represents whether this module is in training or
                evaluation mode.
:vartype training: bool</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ModelInterface_for_Generic_ModAASeq_Regression" class="doc_header"><code>class</code> <code>ModelInterface_for_Generic_ModAASeq_Regression</code><a href="https://github.com/MannLabs/alphapeptdeep/tree/main/peptdeep/model/generic_property_prediction.py#L210" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ModelInterface_for_Generic_ModAASeq_Regression</code>(<strong><code>dropout</code></strong>=<em><code>0.1</code></em>, <strong><code>model_class</code></strong>:<code>Module</code>=<em><code>Model_for_Generic_ModAASeq_Regression_LSTM</code></em>, <strong><code>device</code></strong>:<code>str</code>=<em><code>'gpu'</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/alphapeptdeep/model_interface.html#ModelInterface"><code>ModelInterface</code></a></p>
</blockquote>
<p>Provides standardized methods to interact
with ml models. Inherit into new class and override
the abstract (i.e. not implemented) methods.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Scalar-regression-model-(RT)-with-modified-AA-sequences-using-Model_for_Generic_ModAASeq_Regression_LSTM">Scalar regression model (RT) with modified AA sequences using <a href="/alphapeptdeep/generic_property_prediction.html#Model_for_Generic_ModAASeq_Regression_LSTM"><code>Model_for_Generic_ModAASeq_Regression_LSTM</code></a><a class="anchor-link" href="#Scalar-regression-model-(RT)-with-modified-AA-sequences-using-Model_for_Generic_ModAASeq_Regression_LSTM"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_df</span> <span class="o">=</span> <span class="n">create_example_input_dataframe_normalized_irt</span><span class="p">()</span>

<span class="c1">#initialize the modelinterface, specify which of the models to use</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ModelInterface_for_Generic_ModAASeq_Regression</span><span class="p">(</span>
    <span class="n">model_class</span><span class="o">=</span><span class="n">Model_for_Generic_ModAASeq_Regression_LSTM</span>
<span class="p">)</span>
<span class="c1"># specify the name of the column you want to use for traning</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_train</span> <span class="o">=</span> <span class="s1">&#39;normalized_irt&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_predict</span> <span class="o">=</span> <span class="s1">&#39;predicted_normalized_irt&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">example_df</span><span class="p">,</span> <span class="n">epoch</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">example_df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sequence</th>
      <th>pep_name</th>
      <th>irt</th>
      <th>mods</th>
      <th>mod_sites</th>
      <th>nAA</th>
      <th>normalized_irt</th>
      <th>predicted_normalized_irt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LGGNEQVTR</td>
      <td>RT-pep a</td>
      <td>-24.92</td>
      <td></td>
      <td></td>
      <td>9</td>
      <td>0.000000</td>
      <td>0.008056</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GAGSSEPVTGLDAK</td>
      <td>RT-pep b</td>
      <td>0.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>0.199488</td>
      <td>0.198335</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VEATFGVDESNAK</td>
      <td>RT-pep c</td>
      <td>12.39</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.298671</td>
      <td>0.304394</td>
    </tr>
    <tr>
      <th>3</th>
      <td>YILAGVENSK</td>
      <td>RT-pep d</td>
      <td>19.79</td>
      <td></td>
      <td></td>
      <td>10</td>
      <td>0.357909</td>
      <td>0.358489</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TPVISGGPYEYR</td>
      <td>RT-pep e</td>
      <td>28.71</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.429315</td>
      <td>0.427770</td>
    </tr>
    <tr>
      <th>5</th>
      <td>TPVITGAPYEYR</td>
      <td>RT-pep f</td>
      <td>33.38</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.466699</td>
      <td>0.461542</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DGLDAASYYAPVR</td>
      <td>RT-pep g</td>
      <td>42.26</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.537784</td>
      <td>0.518003</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ADVTPADFSEWSK</td>
      <td>RT-pep h</td>
      <td>54.62</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.636728</td>
      <td>0.608539</td>
    </tr>
    <tr>
      <th>8</th>
      <td>GTFIIDPGGVIR</td>
      <td>RT-pep i</td>
      <td>70.52</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.764009</td>
      <td>0.739531</td>
    </tr>
    <tr>
      <th>9</th>
      <td>GTFIIDPAAVIR</td>
      <td>RT-pep k</td>
      <td>87.23</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.897775</td>
      <td>0.836452</td>
    </tr>
    <tr>
      <th>10</th>
      <td>LFLQFGAQGSPFLK</td>
      <td>RT-pep l</td>
      <td>100.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>1.000000</td>
      <td>0.946470</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Scalar-regression-model-(RT)-with-modified-AA-sequences-using-Model_for_Generic_ModAASeq_Regression_Transformer">Scalar regression model (RT) with modified AA sequences using <a href="/alphapeptdeep/generic_property_prediction.html#Model_for_Generic_ModAASeq_Regression_Transformer"><code>Model_for_Generic_ModAASeq_Regression_Transformer</code></a><a class="anchor-link" href="#Scalar-regression-model-(RT)-with-modified-AA-sequences-using-Model_for_Generic_ModAASeq_Regression_Transformer"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_df</span> <span class="o">=</span> <span class="n">create_example_input_dataframe_normalized_irt</span><span class="p">()</span>

<span class="c1">#initialize the modelinterface, specify which of the models to use</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ModelInterface_for_Generic_ModAASeq_Regression</span><span class="p">(</span>
    <span class="n">model_class</span><span class="o">=</span><span class="n">Model_for_Generic_ModAASeq_Regression_Transformer</span>
<span class="p">)</span>
<span class="c1"># specify the name of the column you want to use for traning</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_train</span> <span class="o">=</span> <span class="s1">&#39;normalized_irt&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_predict</span> <span class="o">=</span> <span class="s1">&#39;predicted_normalized_irt&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">example_df</span><span class="p">,</span> <span class="n">epoch</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">example_df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sequence</th>
      <th>pep_name</th>
      <th>irt</th>
      <th>mods</th>
      <th>mod_sites</th>
      <th>nAA</th>
      <th>normalized_irt</th>
      <th>predicted_normalized_irt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LGGNEQVTR</td>
      <td>RT-pep a</td>
      <td>-24.92</td>
      <td></td>
      <td></td>
      <td>9</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GAGSSEPVTGLDAK</td>
      <td>RT-pep b</td>
      <td>0.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>0.199488</td>
      <td>0.099054</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VEATFGVDESNAK</td>
      <td>RT-pep c</td>
      <td>12.39</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.298671</td>
      <td>0.231878</td>
    </tr>
    <tr>
      <th>3</th>
      <td>YILAGVENSK</td>
      <td>RT-pep d</td>
      <td>19.79</td>
      <td></td>
      <td></td>
      <td>10</td>
      <td>0.357909</td>
      <td>0.407409</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TPVISGGPYEYR</td>
      <td>RT-pep e</td>
      <td>28.71</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.429315</td>
      <td>0.294037</td>
    </tr>
    <tr>
      <th>5</th>
      <td>TPVITGAPYEYR</td>
      <td>RT-pep f</td>
      <td>33.38</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.466699</td>
      <td>0.343179</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DGLDAASYYAPVR</td>
      <td>RT-pep g</td>
      <td>42.26</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.537784</td>
      <td>0.548849</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ADVTPADFSEWSK</td>
      <td>RT-pep h</td>
      <td>54.62</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.636728</td>
      <td>0.543506</td>
    </tr>
    <tr>
      <th>8</th>
      <td>GTFIIDPGGVIR</td>
      <td>RT-pep i</td>
      <td>70.52</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.764009</td>
      <td>0.700900</td>
    </tr>
    <tr>
      <th>9</th>
      <td>GTFIIDPAAVIR</td>
      <td>RT-pep k</td>
      <td>87.23</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.897775</td>
      <td>0.875348</td>
    </tr>
    <tr>
      <th>10</th>
      <td>LFLQFGAQGSPFLK</td>
      <td>RT-pep l</td>
      <td>100.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>1.000000</td>
      <td>1.009214</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Binary-classification-models-for-a-given-amino-acid-sequence">Binary classification models for a given amino acid sequence<a class="anchor-link" href="#Binary-classification-models-for-a-given-amino-acid-sequence"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Model_for_Generic_AASeq_BinaryClassification_LSTM" class="doc_header"><code>class</code> <code>Model_for_Generic_AASeq_BinaryClassification_LSTM</code><a href="https://github.com/MannLabs/alphapeptdeep/tree/main/peptdeep/model/generic_property_prediction.py#L235" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Model_for_Generic_AASeq_BinaryClassification_LSTM</code>(<strong><code>hidden_dim</code></strong>=<em><code>256</code></em>, <strong><code>n_lstm_layers</code></strong>=<em><code>4</code></em>, <strong><code>dropout</code></strong>=<em><code>0.1</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/alphapeptdeep/generic_property_prediction.html#Model_for_Generic_AASeq_Regression_LSTM"><code>Model_for_Generic_AASeq_Regression_LSTM</code></a></p>
</blockquote>
<p>Base class for all neural network modules.</p>
<p>Your models should also subclass this class.</p>
<p>Modules can also contain other Modules, allowing to nest them in
a tree structure. You can assign the submodules as regular attributes::</p>

<pre><code>import torch.nn as nn
import torch.nn.functional as F

class Model(nn.Module):
    def __init__(self):
        super(Model, self).__init__()
        self.conv1 = nn.Conv2d(1, 20, 5)
        self.conv2 = nn.Conv2d(20, 20, 5)

    def forward(self, x):
        x = F.relu(self.conv1(x))
        return F.relu(self.conv2(x))

</code></pre>
<p>Submodules assigned in this way will be registered, and will have their
parameters converted too when you call :meth:<code>to</code>, etc.</p>
<p>:ivar training: Boolean represents whether this module is in training or
                evaluation mode.
:vartype training: bool</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Model_for_Generic_AASeq_BinaryClassification_Transformer" class="doc_header"><code>class</code> <code>Model_for_Generic_AASeq_BinaryClassification_Transformer</code><a href="https://github.com/MannLabs/alphapeptdeep/tree/main/peptdeep/model/generic_property_prediction.py#L255" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Model_for_Generic_AASeq_BinaryClassification_Transformer</code>(<strong><code>hidden_dim</code></strong>=<em><code>256</code></em>, <strong><code>nlayers</code></strong>=<em><code>4</code></em>, <strong><code>output_attentions</code></strong>=<em><code>False</code></em>, <strong><code>dropout</code></strong>=<em><code>0.1</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/alphapeptdeep/generic_property_prediction.html#Model_for_Generic_AASeq_Regression_Transformer"><code>Model_for_Generic_AASeq_Regression_Transformer</code></a></p>
</blockquote>
<p>Base class for all neural network modules.</p>
<p>Your models should also subclass this class.</p>
<p>Modules can also contain other Modules, allowing to nest them in
a tree structure. You can assign the submodules as regular attributes::</p>

<pre><code>import torch.nn as nn
import torch.nn.functional as F

class Model(nn.Module):
    def __init__(self):
        super(Model, self).__init__()
        self.conv1 = nn.Conv2d(1, 20, 5)
        self.conv2 = nn.Conv2d(20, 20, 5)

    def forward(self, x):
        x = F.relu(self.conv1(x))
        return F.relu(self.conv2(x))

</code></pre>
<p>Submodules assigned in this way will be registered, and will have their
parameters converted too when you call :meth:<code>to</code>, etc.</p>
<p>:ivar training: Boolean represents whether this module is in training or
                evaluation mode.
:vartype training: bool</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ModelInterface_for_Generic_AASeq_BinaryClassification" class="doc_header"><code>class</code> <code>ModelInterface_for_Generic_AASeq_BinaryClassification</code><a href="https://github.com/MannLabs/alphapeptdeep/tree/main/peptdeep/model/generic_property_prediction.py#L282" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ModelInterface_for_Generic_AASeq_BinaryClassification</code>(<strong><code>dropout</code></strong>=<em><code>0.1</code></em>, <strong><code>model_class</code></strong>:<code>Module</code>=<em><code>Model_for_Generic_AASeq_BinaryClassification_LSTM</code></em>, <strong><code>device</code></strong>:<code>str</code>=<em><code>'gpu'</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/alphapeptdeep/model_interface.html#ModelInterface"><code>ModelInterface</code></a></p>
</blockquote>
<p>Provides standardized methods to interact
with ml models. Inherit into new class and override
the abstract (i.e. not implemented) methods.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">create_example_input_dataframe_classification_rt</span><span class="p">():</span>
    <span class="n">rt_df</span> <span class="o">=</span> <span class="n">create_example_input_dataframe_normalized_irt</span><span class="p">()</span>
    <span class="n">rt_df</span><span class="p">[</span><span class="s1">&#39;is_in_first_half_of_column&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">rt_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;is_in_first_half_of_column&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">rt_df</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="A-sequence-classification-model-using-Model_for_Generic_AASeq_BinaryClassification_LSTM">A sequence classification model using <a href="/alphapeptdeep/generic_property_prediction.html#Model_for_Generic_AASeq_BinaryClassification_LSTM"><code>Model_for_Generic_AASeq_BinaryClassification_LSTM</code></a><a class="anchor-link" href="#A-sequence-classification-model-using-Model_for_Generic_AASeq_BinaryClassification_LSTM"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_df</span> <span class="o">=</span> <span class="n">create_example_input_dataframe_classification_rt</span><span class="p">()</span>

<span class="c1">#initialize the modelinterface, specify which of the models to use</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ModelInterface_for_Generic_AASeq_BinaryClassification</span><span class="p">(</span>
    <span class="n">model_class</span><span class="o">=</span><span class="n">Model_for_Generic_AASeq_BinaryClassification_LSTM</span>
<span class="p">)</span>
<span class="c1"># specify the name of the column you want to use for traning</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_train</span> <span class="o">=</span> <span class="s1">&#39;is_in_first_half_of_column&#39;</span> 
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_predict</span> <span class="o">=</span> <span class="s1">&#39;predicted_will_be_in_first_half_of_column&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">example_df</span><span class="p">,</span> <span class="n">epoch</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">example_df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sequence</th>
      <th>pep_name</th>
      <th>irt</th>
      <th>mods</th>
      <th>mod_sites</th>
      <th>nAA</th>
      <th>normalized_irt</th>
      <th>is_in_first_half_of_column</th>
      <th>predicted_will_be_in_first_half_of_column</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LGGNEQVTR</td>
      <td>RT-pep a</td>
      <td>-24.92</td>
      <td></td>
      <td></td>
      <td>9</td>
      <td>0.000000</td>
      <td>1</td>
      <td>0.993174</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GAGSSEPVTGLDAK</td>
      <td>RT-pep b</td>
      <td>0.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>0.199488</td>
      <td>1</td>
      <td>0.989214</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VEATFGVDESNAK</td>
      <td>RT-pep c</td>
      <td>12.39</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.298671</td>
      <td>1</td>
      <td>0.993532</td>
    </tr>
    <tr>
      <th>3</th>
      <td>YILAGVENSK</td>
      <td>RT-pep d</td>
      <td>19.79</td>
      <td></td>
      <td></td>
      <td>10</td>
      <td>0.357909</td>
      <td>1</td>
      <td>0.992786</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TPVISGGPYEYR</td>
      <td>RT-pep e</td>
      <td>28.71</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.429315</td>
      <td>1</td>
      <td>0.992660</td>
    </tr>
    <tr>
      <th>5</th>
      <td>TPVITGAPYEYR</td>
      <td>RT-pep f</td>
      <td>33.38</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.466699</td>
      <td>1</td>
      <td>0.991030</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DGLDAASYYAPVR</td>
      <td>RT-pep g</td>
      <td>42.26</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.537784</td>
      <td>0</td>
      <td>0.308686</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ADVTPADFSEWSK</td>
      <td>RT-pep h</td>
      <td>54.62</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.636728</td>
      <td>0</td>
      <td>0.317267</td>
    </tr>
    <tr>
      <th>8</th>
      <td>GTFIIDPGGVIR</td>
      <td>RT-pep i</td>
      <td>70.52</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.764009</td>
      <td>0</td>
      <td>0.323006</td>
    </tr>
    <tr>
      <th>9</th>
      <td>GTFIIDPAAVIR</td>
      <td>RT-pep k</td>
      <td>87.23</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.897775</td>
      <td>0</td>
      <td>0.316616</td>
    </tr>
    <tr>
      <th>10</th>
      <td>LFLQFGAQGSPFLK</td>
      <td>RT-pep l</td>
      <td>100.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0.310942</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="A-sequence-classification-model-using-Model_for_Generic_AASeq_BinaryClassification_Transformer">A sequence classification model using <a href="/alphapeptdeep/generic_property_prediction.html#Model_for_Generic_AASeq_BinaryClassification_Transformer"><code>Model_for_Generic_AASeq_BinaryClassification_Transformer</code></a><a class="anchor-link" href="#A-sequence-classification-model-using-Model_for_Generic_AASeq_BinaryClassification_Transformer"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_df</span> <span class="o">=</span> <span class="n">create_example_input_dataframe_classification_rt</span><span class="p">()</span>

<span class="c1">#initialize the modelinterface, specify which of the models to use</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ModelInterface_for_Generic_AASeq_BinaryClassification</span><span class="p">(</span>
    <span class="n">model_class</span><span class="o">=</span><span class="n">Model_for_Generic_AASeq_BinaryClassification_Transformer</span>
<span class="p">)</span>
<span class="c1"># specify the name of the column you want to use for traning</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_train</span> <span class="o">=</span> <span class="s1">&#39;is_in_first_half_of_column&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_predict</span> <span class="o">=</span> <span class="s1">&#39;predicted_will_be_in_first_half_of_column&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">example_df</span><span class="p">,</span> <span class="n">epoch</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">example_df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sequence</th>
      <th>pep_name</th>
      <th>irt</th>
      <th>mods</th>
      <th>mod_sites</th>
      <th>nAA</th>
      <th>normalized_irt</th>
      <th>is_in_first_half_of_column</th>
      <th>predicted_will_be_in_first_half_of_column</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LGGNEQVTR</td>
      <td>RT-pep a</td>
      <td>-24.92</td>
      <td></td>
      <td></td>
      <td>9</td>
      <td>0.000000</td>
      <td>1</td>
      <td>0.997722</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GAGSSEPVTGLDAK</td>
      <td>RT-pep b</td>
      <td>0.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>0.199488</td>
      <td>1</td>
      <td>0.997216</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VEATFGVDESNAK</td>
      <td>RT-pep c</td>
      <td>12.39</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.298671</td>
      <td>1</td>
      <td>0.996552</td>
    </tr>
    <tr>
      <th>3</th>
      <td>YILAGVENSK</td>
      <td>RT-pep d</td>
      <td>19.79</td>
      <td></td>
      <td></td>
      <td>10</td>
      <td>0.357909</td>
      <td>1</td>
      <td>0.997443</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TPVISGGPYEYR</td>
      <td>RT-pep e</td>
      <td>28.71</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.429315</td>
      <td>1</td>
      <td>0.996104</td>
    </tr>
    <tr>
      <th>5</th>
      <td>TPVITGAPYEYR</td>
      <td>RT-pep f</td>
      <td>33.38</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.466699</td>
      <td>1</td>
      <td>0.995777</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DGLDAASYYAPVR</td>
      <td>RT-pep g</td>
      <td>42.26</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.537784</td>
      <td>0</td>
      <td>0.003511</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ADVTPADFSEWSK</td>
      <td>RT-pep h</td>
      <td>54.62</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.636728</td>
      <td>0</td>
      <td>0.004135</td>
    </tr>
    <tr>
      <th>8</th>
      <td>GTFIIDPGGVIR</td>
      <td>RT-pep i</td>
      <td>70.52</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.764009</td>
      <td>0</td>
      <td>0.004020</td>
    </tr>
    <tr>
      <th>9</th>
      <td>GTFIIDPAAVIR</td>
      <td>RT-pep k</td>
      <td>87.23</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.897775</td>
      <td>0</td>
      <td>0.003701</td>
    </tr>
    <tr>
      <th>10</th>
      <td>LFLQFGAQGSPFLK</td>
      <td>RT-pep l</td>
      <td>100.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0.003674</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Binary-classification-models-for-given-amino-acid-sequence-and-site-specific-PTMs">Binary classification models for given amino acid sequence and site-specific PTMs<a class="anchor-link" href="#Binary-classification-models-for-given-amino-acid-sequence-and-site-specific-PTMs"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Model_for_Generic_ModAASeq_BinaryClassification_LSTM" class="doc_header"><code>class</code> <code>Model_for_Generic_ModAASeq_BinaryClassification_LSTM</code><a href="https://github.com/MannLabs/alphapeptdeep/tree/main/peptdeep/model/generic_property_prediction.py#L303" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Model_for_Generic_ModAASeq_BinaryClassification_LSTM</code>(<strong><code>hidden_dim</code></strong>=<em><code>256</code></em>, <strong><code>n_lstm_layers</code></strong>=<em><code>4</code></em>, <strong><code>dropout</code></strong>=<em><code>0.1</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/alphapeptdeep/generic_property_prediction.html#Model_for_Generic_ModAASeq_Regression_LSTM"><code>Model_for_Generic_ModAASeq_Regression_LSTM</code></a></p>
</blockquote>
<p>Base class for all neural network modules.</p>
<p>Your models should also subclass this class.</p>
<p>Modules can also contain other Modules, allowing to nest them in
a tree structure. You can assign the submodules as regular attributes::</p>

<pre><code>import torch.nn as nn
import torch.nn.functional as F

class Model(nn.Module):
    def __init__(self):
        super(Model, self).__init__()
        self.conv1 = nn.Conv2d(1, 20, 5)
        self.conv2 = nn.Conv2d(20, 20, 5)

    def forward(self, x):
        x = F.relu(self.conv1(x))
        return F.relu(self.conv2(x))

</code></pre>
<p>Submodules assigned in this way will be registered, and will have their
parameters converted too when you call :meth:<code>to</code>, etc.</p>
<p>:ivar training: Boolean represents whether this module is in training or
                evaluation mode.
:vartype training: bool</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Model_for_Generic_ModAASeq_BinaryClassification_Transformer" class="doc_header"><code>class</code> <code>Model_for_Generic_ModAASeq_BinaryClassification_Transformer</code><a href="https://github.com/MannLabs/alphapeptdeep/tree/main/peptdeep/model/generic_property_prediction.py#L325" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Model_for_Generic_ModAASeq_BinaryClassification_Transformer</code>(<strong><code>hidden_dim</code></strong>=<em><code>256</code></em>, <strong><code>nlayers</code></strong>=<em><code>4</code></em>, <strong><code>output_attentions</code></strong>=<em><code>False</code></em>, <strong><code>dropout</code></strong>=<em><code>0.1</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/alphapeptdeep/generic_property_prediction.html#Model_for_Generic_ModAASeq_Regression_Transformer"><code>Model_for_Generic_ModAASeq_Regression_Transformer</code></a></p>
</blockquote>
<p>Base class for all neural network modules.</p>
<p>Your models should also subclass this class.</p>
<p>Modules can also contain other Modules, allowing to nest them in
a tree structure. You can assign the submodules as regular attributes::</p>

<pre><code>import torch.nn as nn
import torch.nn.functional as F

class Model(nn.Module):
    def __init__(self):
        super(Model, self).__init__()
        self.conv1 = nn.Conv2d(1, 20, 5)
        self.conv2 = nn.Conv2d(20, 20, 5)

    def forward(self, x):
        x = F.relu(self.conv1(x))
        return F.relu(self.conv2(x))

</code></pre>
<p>Submodules assigned in this way will be registered, and will have their
parameters converted too when you call :meth:<code>to</code>, etc.</p>
<p>:ivar training: Boolean represents whether this module is in training or
                evaluation mode.
:vartype training: bool</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ModelInterface_for_Generic_ModAASeq_BinaryClassification" class="doc_header"><code>class</code> <code>ModelInterface_for_Generic_ModAASeq_BinaryClassification</code><a href="https://github.com/MannLabs/alphapeptdeep/tree/main/peptdeep/model/generic_property_prediction.py#L364" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ModelInterface_for_Generic_ModAASeq_BinaryClassification</code>(<strong><code>dropout</code></strong>=<em><code>0.1</code></em>, <strong><code>model_class</code></strong>:<code>Module</code>=<em><code>Model_for_Generic_ModAASeq_BinaryClassification_LSTM</code></em>, <strong><code>device</code></strong>:<code>str</code>=<em><code>'gpu'</code></em>, <strong>**<code>kwargs</code></strong>) :: <a href="/alphapeptdeep/model_interface.html#ModelInterface"><code>ModelInterface</code></a></p>
</blockquote>
<p>Provides standardized methods to interact
with ml models. Inherit into new class and override
the abstract (i.e. not implemented) methods.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">create_example_input_dataframe_classification_rt</span><span class="p">():</span>
    <span class="n">rt_df</span> <span class="o">=</span> <span class="n">create_example_input_dataframe_normalized_irt</span><span class="p">()</span>
    <span class="n">rt_df</span><span class="p">[</span><span class="s1">&#39;is_in_first_half_of_column&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">rt_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;is_in_first_half_of_column&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">rt_df</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="A-sequence-classification-model-using-Model_for_Generic_ModAASeq_BinaryClassification_LSTM">A sequence classification model using <a href="/alphapeptdeep/generic_property_prediction.html#Model_for_Generic_ModAASeq_BinaryClassification_LSTM"><code>Model_for_Generic_ModAASeq_BinaryClassification_LSTM</code></a><a class="anchor-link" href="#A-sequence-classification-model-using-Model_for_Generic_ModAASeq_BinaryClassification_LSTM"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_df</span> <span class="o">=</span> <span class="n">create_example_input_dataframe_classification_rt</span><span class="p">()</span>

<span class="c1">#initialize the modelinterface, specify which of the models to use</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ModelInterface_for_Generic_ModAASeq_BinaryClassification</span><span class="p">(</span>
    <span class="n">model_class</span><span class="o">=</span><span class="n">Model_for_Generic_ModAASeq_BinaryClassification_LSTM</span>
<span class="p">)</span>
<span class="c1"># specify the name of the column you want to use for traning</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_train</span> <span class="o">=</span> <span class="s1">&#39;is_in_first_half_of_column&#39;</span> 
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_predict</span> <span class="o">=</span> <span class="s1">&#39;predicted_will_be_in_first_half_of_column&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">example_df</span><span class="p">,</span> <span class="n">epoch</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">example_df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sequence</th>
      <th>pep_name</th>
      <th>irt</th>
      <th>mods</th>
      <th>mod_sites</th>
      <th>nAA</th>
      <th>normalized_irt</th>
      <th>is_in_first_half_of_column</th>
      <th>predicted_will_be_in_first_half_of_column</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LGGNEQVTR</td>
      <td>RT-pep a</td>
      <td>-24.92</td>
      <td></td>
      <td></td>
      <td>9</td>
      <td>0.000000</td>
      <td>1</td>
      <td>0.996521</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GAGSSEPVTGLDAK</td>
      <td>RT-pep b</td>
      <td>0.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>0.199488</td>
      <td>1</td>
      <td>0.996062</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VEATFGVDESNAK</td>
      <td>RT-pep c</td>
      <td>12.39</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.298671</td>
      <td>1</td>
      <td>0.996103</td>
    </tr>
    <tr>
      <th>3</th>
      <td>YILAGVENSK</td>
      <td>RT-pep d</td>
      <td>19.79</td>
      <td></td>
      <td></td>
      <td>10</td>
      <td>0.357909</td>
      <td>1</td>
      <td>0.996884</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TPVISGGPYEYR</td>
      <td>RT-pep e</td>
      <td>28.71</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.429315</td>
      <td>1</td>
      <td>0.996284</td>
    </tr>
    <tr>
      <th>5</th>
      <td>TPVITGAPYEYR</td>
      <td>RT-pep f</td>
      <td>33.38</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.466699</td>
      <td>1</td>
      <td>0.993848</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DGLDAASYYAPVR</td>
      <td>RT-pep g</td>
      <td>42.26</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.537784</td>
      <td>0</td>
      <td>0.406263</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ADVTPADFSEWSK</td>
      <td>RT-pep h</td>
      <td>54.62</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.636728</td>
      <td>0</td>
      <td>0.407196</td>
    </tr>
    <tr>
      <th>8</th>
      <td>GTFIIDPGGVIR</td>
      <td>RT-pep i</td>
      <td>70.52</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.764009</td>
      <td>0</td>
      <td>0.402498</td>
    </tr>
    <tr>
      <th>9</th>
      <td>GTFIIDPAAVIR</td>
      <td>RT-pep k</td>
      <td>87.23</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.897775</td>
      <td>0</td>
      <td>0.397870</td>
    </tr>
    <tr>
      <th>10</th>
      <td>LFLQFGAQGSPFLK</td>
      <td>RT-pep l</td>
      <td>100.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0.397521</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="A-sequence-classification-model-using-Model_for_Generic_ModAASeq_BinaryClassification_Transformer">A sequence classification model using <a href="/alphapeptdeep/generic_property_prediction.html#Model_for_Generic_ModAASeq_BinaryClassification_Transformer"><code>Model_for_Generic_ModAASeq_BinaryClassification_Transformer</code></a><a class="anchor-link" href="#A-sequence-classification-model-using-Model_for_Generic_ModAASeq_BinaryClassification_Transformer"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">example_df</span> <span class="o">=</span> <span class="n">create_example_input_dataframe_classification_rt</span><span class="p">()</span>

<span class="c1">#initialize the modelinterface, specify which of the models to use</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">ModelInterface_for_Generic_ModAASeq_BinaryClassification</span><span class="p">(</span>
    <span class="n">model_class</span><span class="o">=</span><span class="n">Model_for_Generic_ModAASeq_BinaryClassification_Transformer</span>
<span class="p">)</span>
<span class="c1"># specify the name of the column you want to use for traning</span>
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_train</span> <span class="o">=</span> <span class="s1">&#39;is_in_first_half_of_column&#39;</span> 
<span class="n">model</span><span class="o">.</span><span class="n">target_column_to_predict</span> <span class="o">=</span> <span class="s1">&#39;predicted_will_be_in_first_half_of_column&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">example_df</span><span class="p">,</span> <span class="n">epoch</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">example_df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sequence</th>
      <th>pep_name</th>
      <th>irt</th>
      <th>mods</th>
      <th>mod_sites</th>
      <th>nAA</th>
      <th>normalized_irt</th>
      <th>is_in_first_half_of_column</th>
      <th>predicted_will_be_in_first_half_of_column</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>LGGNEQVTR</td>
      <td>RT-pep a</td>
      <td>-24.92</td>
      <td></td>
      <td></td>
      <td>9</td>
      <td>0.000000</td>
      <td>1</td>
      <td>0.996638</td>
    </tr>
    <tr>
      <th>1</th>
      <td>GAGSSEPVTGLDAK</td>
      <td>RT-pep b</td>
      <td>0.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>0.199488</td>
      <td>1</td>
      <td>0.995580</td>
    </tr>
    <tr>
      <th>2</th>
      <td>VEATFGVDESNAK</td>
      <td>RT-pep c</td>
      <td>12.39</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.298671</td>
      <td>1</td>
      <td>0.995562</td>
    </tr>
    <tr>
      <th>3</th>
      <td>YILAGVENSK</td>
      <td>RT-pep d</td>
      <td>19.79</td>
      <td></td>
      <td></td>
      <td>10</td>
      <td>0.357909</td>
      <td>1</td>
      <td>0.996606</td>
    </tr>
    <tr>
      <th>4</th>
      <td>TPVISGGPYEYR</td>
      <td>RT-pep e</td>
      <td>28.71</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.429315</td>
      <td>1</td>
      <td>0.995767</td>
    </tr>
    <tr>
      <th>5</th>
      <td>TPVITGAPYEYR</td>
      <td>RT-pep f</td>
      <td>33.38</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.466699</td>
      <td>1</td>
      <td>0.995354</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DGLDAASYYAPVR</td>
      <td>RT-pep g</td>
      <td>42.26</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.537784</td>
      <td>0</td>
      <td>0.003368</td>
    </tr>
    <tr>
      <th>7</th>
      <td>ADVTPADFSEWSK</td>
      <td>RT-pep h</td>
      <td>54.62</td>
      <td></td>
      <td></td>
      <td>13</td>
      <td>0.636728</td>
      <td>0</td>
      <td>0.003934</td>
    </tr>
    <tr>
      <th>8</th>
      <td>GTFIIDPGGVIR</td>
      <td>RT-pep i</td>
      <td>70.52</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.764009</td>
      <td>0</td>
      <td>0.002995</td>
    </tr>
    <tr>
      <th>9</th>
      <td>GTFIIDPAAVIR</td>
      <td>RT-pep k</td>
      <td>87.23</td>
      <td></td>
      <td></td>
      <td>12</td>
      <td>0.897775</td>
      <td>0</td>
      <td>0.002972</td>
    </tr>
    <tr>
      <th>10</th>
      <td>LFLQFGAQGSPFLK</td>
      <td>RT-pep l</td>
      <td>100.00</td>
      <td></td>
      <td></td>
      <td>14</td>
      <td>1.000000</td>
      <td>0</td>
      <td>0.002998</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

